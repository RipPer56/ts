{"version":3,"sources":["../../src/app/complaints/complaint-list/complaint-list.module.ts","../../src/app/complaints/complaints.dal.ts","../../src/app/complaints/complaint.module.ts","../../src/app/complaints/complaint-list/complaint-list.ts"],"names":[],"mappings":"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","file":"6.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ComplaintListPage } from './complaint-list';\nimport { SharedModule } from \"../../shared/shared.module\";\nimport { ComplaintsModule } from \"../complaint.module\";\n\n@NgModule({\n  declarations: [\n    ComplaintListPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ComplaintListPage),\n    SharedModule,\n    ComplaintsModule,\n\n  ],\n})\nexport class ComplaintListPageModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/complaints/complaint-list/complaint-list.module.ts","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport { urlEndPoints } from '../shared/config/endPoints';\nimport { CacheService } from '../shared/services/cache-service';\nimport { Complaint } from './complaint.model';\n\n@Injectable()\nexport class ComplaintsDal {\n\n\n  constructor(private httpClient: HttpClient, private cacheService: CacheService) {\n  }\n\n  getAllComplaints(adherentId: string, start: number = 1, end: number = 2): Observable<Complaint[]> {\n    return this.httpClient.get<Complaint[]>(urlEndPoints.complaintsUrl + \"?start=\" + start + \"&end=\" + end);\n  }\n\n  getComplaintDetailById(complaintId: string): Observable<Complaint | null> {\n    return this.httpClient.get<Complaint>(urlEndPoints.complaintDetailUrl + complaintId);\n  }\n\n  addComplaintByFolderId(complaint: Complaint): Observable<Complaint | null> {\n    this.cacheService.refreshSpecifiqueCache(urlEndPoints.complaintsUrl);\n    return this.httpClient.post<Complaint>(urlEndPoints.complaintDetailUrl, {\n      folderId: complaint.folderId,\n      reason: complaint.reason,\n      description: complaint.description\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/complaints/complaints.dal.ts","import { NgModule } from '@angular/core';\nimport { ComplaintsDal } from \"./complaints.dal\";\nimport { SharedModule } from \"../shared/shared.module\";\n\n@NgModule({\n  declarations: [],\n  imports: [SharedModule],\n  providers: [ComplaintsDal]\n})\n\nexport class ComplaintsModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/complaints/complaint.module.ts","import { Component, OnInit } from '@angular/core';\nimport { InfiniteScroll, IonicPage, NavController } from 'ionic-angular';\nimport { Subscription } from 'rxjs/Subscription';\nimport { ErrorService } from '../../shared/services/error.service';\nimport { Complaint } from '../complaint.model';\nimport { ComplaintsDal } from '../complaints.dal';\n\n@IonicPage({\n  name: 'complaint-list',\n})\n@Component({\n  selector: \"complaint-list-page\",\n  templateUrl: \"complaint-list.html\",\n})\nexport class ComplaintListPage implements OnInit {\n  //TODO @input from dashboard section\n  adherentId = \"K498220\";\n  complaints: Complaint[] = [];\n  isloading: boolean = true;\n  data: Complaint[] = [];\n  start = 1;\n  end = 6;\n  noMoreData: boolean = false;\n\n  private complaintListSubscription: Subscription[] = [];\n\n  constructor(private complaintDal: ComplaintsDal,\n              private errorService: ErrorService,\n              private navCtrl: NavController) {\n  }\n\n  ngOnInit() {\n    this.getComplaints();\n  }\n\n  doInfinite(infiniteScroll: InfiniteScroll) {\n    this.end = this.start + 2;\n    this.complaintListSubscription.push(this.complaintDal.getAllComplaints(this.adherentId, this.start, this.end)\n      .subscribe((complaints: Complaint[]) => {\n        this.data = complaints;\n        if (this.data.length == 0) {\n          infiniteScroll.enable(false);\n          this.noMoreData = true;\n          return;\n        }\n        for (let i = 0; i < this.data.length; i++) {\n          this.complaints.push(this.data[i]);\n        }\n        this.start = this.end + 1;\n        infiniteScroll.complete();\n      }, (error: any) => {\n        this.errorService.sendError(error);\n        infiniteScroll.complete();\n      }));\n  }\n\n  ngOnDestroy() {\n    for (let subscription of this.complaintListSubscription)\n      if (subscription) {\n        subscription.unsubscribe();\n      }\n  }\n\n  private getComplaints() {\n    this.complaintListSubscription.push(this.complaintDal.getAllComplaints(this.adherentId, this.start, this.end)\n      .subscribe((complaints: Complaint[]) => {\n        this.isloading = false;\n        this.complaints = complaints;\n      }, error => {\n        this.isloading = false;\n        this.errorService.sendError(error);\n      }));\n    this.start = this.end + 1;\n  }\n\n  displayAddComplaint() {\n\n    /**\n     *  we passed \"\" as value to avoid URL errors (such as /:folderId, /nul, /undefined)\n     */\n    this.navCtrl.push('add-complaint', {folderId: ''});\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/complaints/complaint-list/complaint-list.ts"],"sourceRoot":""}
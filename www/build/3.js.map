{"version":3,"sources":["../../src/app/complaints/add-complaint/add-complaint.module.ts","../../src/app/shared/services/Load.service.ts","../../src/app/complaints/complaints.dal.ts","../../src/app/complaints/complaint.module.ts","../../src/app/complaints/complaint.model.ts","../../src/app/complaints/add-complaint/add-complaint.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AddComplaintPage } from './add-complaint';\nimport { ComplaintsModule } from \"../complaint.module\";\nimport { LoadService } from \"../../shared/services/Load.service\";\n\n@NgModule({\n  declarations: [\n    AddComplaintPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AddComplaintPage),\n    ComplaintsModule,\n  ],\n  providers: [\n    LoadService\n  ]\n})\nexport class AddComplaintPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/complaints/add-complaint/add-complaint.module.ts","import { Injectable } from '@angular/core';\nimport { Loading, LoadingController } from 'ionic-angular';\n\n\n@Injectable()\nexport class LoadService {\n  loader: Loading;\n\n  constructor(private loadCtrl: LoadingController) {\n\n  }\n\n\n  start(msg?:string){\n    this.loader = this.loadCtrl.create({\n      content: 'Chargement ...',\n    });\n    if(msg){\n      this.loader.setContent(msg)\n    }\n    this.loader.present()\n  }\n  stop(){\n    if(this.loader){\n      this.loader.dismiss();\n    }\n  }\n\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/services/Load.service.ts","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport { urlEndPoints } from '../shared/config/endPoints';\nimport { CacheService } from '../shared/services/cache-service';\nimport { Complaint } from './complaint.model';\n\n@Injectable()\nexport class ComplaintsDal {\n\n\n  constructor(private httpClient: HttpClient, private cacheService: CacheService) {\n  }\n\n  getAllComplaints(adherentId: string, start: number = 1, end: number = 2): Observable<Complaint[]> {\n    return this.httpClient.get<Complaint[]>(urlEndPoints.complaintsUrl + \"?start=\" + start + \"&end=\" + end);\n  }\n\n  getComplaintDetailById(complaintId: string): Observable<Complaint | null> {\n    return this.httpClient.get<Complaint>(urlEndPoints.complaintDetailUrl + complaintId);\n  }\n\n  addComplaintByFolderId(complaint: Complaint): Observable<Complaint | null> {\n    this.cacheService.refreshSpecifiqueCache(urlEndPoints.complaintsUrl);\n    return this.httpClient.post<Complaint>(urlEndPoints.complaintDetailUrl, {\n      folderId: complaint.folderId,\n      reason: complaint.reason,\n      description: complaint.description\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/complaints/complaints.dal.ts","import { NgModule } from '@angular/core';\nimport { ComplaintsDal } from \"./complaints.dal\";\nimport { SharedModule } from \"../shared/shared.module\";\n\n@NgModule({\n  declarations: [],\n  imports: [SharedModule],\n  providers: [ComplaintsDal]\n})\n\nexport class ComplaintsModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/complaints/complaint.module.ts","export interface Complaint {\n  id?: string,\n  folderId: string,\n  declarationDate?: Date | number | string,\n  reason?: string,\n  description?: string,\n  status?: ComplaintStatusColor,\n}\n\nexport enum ComplaintStatusColor {\n  SENT = 'green',\n  WAITING = 'orange',\n  CANCELED = 'red',\n  UNKNOWN = 'gray'\n}\n\nexport enum ComplaintStatus {\n  green = 'Accepté',\n  red = 'Rejeté',\n  gray = 'Envoyée',\n  orange= 'En cours de traitement',\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/complaints/complaint.model.ts","import { Component } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { Subscription } from 'rxjs/Subscription';\nimport { Folder } from '../../folders/folder.model';\nimport { ErrorService } from '../../shared/services/error.service';\nimport { LoadService } from '../../shared/services/Load.service';\nimport { Complaint, ComplaintStatusColor } from '../complaint.model';\nimport { ComplaintsDal } from '../complaints.dal';\n\n@IonicPage({\n  name: 'add-complaint',\n  segment: 'add-complaint/:folderId',\n})\n@Component({\n  selector: 'page-add-complaint',\n  templateUrl: 'add-complaint.html',\n})\nexport class AddComplaintPage {\n  reasons: any[] = [{msg: 'Erreur de remboursement'}, {msg: 'Rejet de réclamtion'}];\n  private folderId: string = '';\n  private complaintForm: FormGroup;\n  private complaintSubscription: Subscription;\n\n  constructor(private formBuilder: FormBuilder,\n              private navParams: NavParams,\n              private complaintDal: ComplaintsDal,\n              private errorService: ErrorService,\n              private navCtrl: NavController,\n              private loadService: LoadService) {\n  }\n\n  ngOnInit() {\n    this.buildGroupForm();\n    this.getDataFromParameterOrUrl();\n  }\n\n  buildGroupForm() {\n    this.complaintForm = this.formBuilder.group({\n      'folderId': ['', [Validators.required, Validators.minLength(6)]],\n      'descComplaint': ['', [Validators.required, Validators.minLength(30), Validators.maxLength(250)]],\n      'reasonComplaint': ['', [Validators.required]],\n    });\n  }\n\n  getDataFromParameterOrUrl() {\n    this.folderId = this.navParams.get('folderId');\n    let folder: Folder = this.navParams.get('folder');\n    if (folder) {\n      this.folderId = folder.id + '';\n    }\n  }\n\n  sendComplaint() {\n    if (this.complaintForm.valid) {\n      let complaint: Complaint = {\n        folderId: this.complaintForm.value.folderId,\n        reason: this.reasons[this.complaintForm.value.reasonComplaint].msg,\n        status: ComplaintStatusColor.SENT,\n        description: this.complaintForm.value.descComplaint,\n      };\n      this.loadService.start('Envoi de la nouvelle réclamation');\n      this.complaintSubscription = this.complaintDal.addComplaintByFolderId(complaint).subscribe(() => {\n        this.navCtrl.setRoot('complaint-list');\n        this.loadService.stop();\n      }, reason => {\n        this.errorService.sendError(reason);\n        this.loadService.stop();\n      });\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.complaintSubscription)\n      this.complaintSubscription.unsubscribe();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/complaints/add-complaint/add-complaint.ts"],"sourceRoot":""}